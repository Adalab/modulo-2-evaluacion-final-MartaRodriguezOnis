"use strict";const searchInput=document.querySelector(".js_searchInput"),searchButton=document.querySelector(".js_searchButton"),resetButton=document.querySelector(".js_resetButton"),resultUl=document.querySelector(".js_resultUl"),favouritetUl=document.querySelector(".js_favouritetUl");let data=[],favourites=[];const renderAnimeFav=()=>{let e="";for(const t of favourites)e+=`<li class="js_liAnime" id="${t.mal_id}">`,e+=`<img src="${t.images.jpg.image_url}" alt="Imagen del anime ${t.title}">`,e+=`<h2>${t.title}</h2>`,e+="</li>";favouritetUl.innerHTML=e,listenerAnime()};function handleClickFav(e){const t=parseInt(e.currentTarget.id),i=data.find(e=>e.mal_id===t),n=favourites.findIndex(e=>e.mal_id===t);-1===n?favourites.push(i):favourites.splice(n,1),renderAnimeFav(),renderAnimeResult()}const listenerAnime=()=>{const e=document.querySelectorAll(".js_liAnime");for(const t of e)t.addEventListener("click",handleClickFav)},renderAnimeResult=()=>{let e="",t="";for(const i of data){t=-1!==favourites.findIndex(e=>i.mal_id===e.mal_id)?"favourite":"",e+=`<li class="js_liAnime ${t}" id="${i.mal_id}">`,"https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"!==i.images.jpg.image_url?e+=`<img src="${i.images.jpg.image_url}" alt="Imagen del anime ${i.title}">`:e+='<img src="https://via.placeholder.com/200x200/ffffff/666666/?text=SIN IMAGEN" alt="No hay imagen disponible">',e+=`<h2 class="${t}__title">${i.title}</h2>`,e+="</li>"}resultUl.innerHTML=e,listenerAnime()};function handleClick(e){e.preventDefault();const t=searchInput.value;fetch("https://api.jikan.moe/v4/anime?q="+t).then(e=>e.json()).then(e=>{data=e.data,console.log(data),renderAnimeResult()})}searchButton.addEventListener("click",handleClick);